{% extends "base.html" %}
{% block content %}
<style>
  /* Hide navbar for this page */
  nav.navbar { display: none !important; }

  /* Improved Mobile Responsive CSS */
  * {
    box-sizing: border-box;
  }
  
  body {
    font-family: 'Arial', sans-serif;
    background-color: #1a1a2e;
    color: #e6e6e6;
    margin: 0;
    padding: 0;
    font-size: 16px;
    line-height: 1.6;
  }
  
  .container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 15px;
  }
  
  .profile-header {
    background-color: #16213e;
    padding: 25px 15px;
    margin-bottom: 20px;
    border-radius: 0 0 10px 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }
  
  .profile-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }
  
  .profile-picture {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    border: 4px solid #4361ee;
    object-fit: cover;
    margin-bottom: 20px;
  }
  
  .profile-name {
    font-size: 1.8rem;
    font-weight: 700;
    color: #fff;
    margin: 0 0 5px 0;
    word-break: break-word;
  }
  
  .profile-role {
    font-size: 1.1rem;
    color: #7579e7;
    margin: 0 0 15px 0;
    word-break: break-word;
  }
  
  .button-group {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
    margin-top: 15px;
  }
  
  .btn {
    display: inline-flex;
    align-items: center;
    padding: 8px 16px;
    border-radius: 30px;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.3s ease;
    margin-bottom: 5px;
    white-space: nowrap;
  }
  
  .btn-primary {
    background-color: #4361ee;
    color: white;
  }
  
  .btn-primary:hover {
    background-color: #3a56d4;
  }
  
  .btn-secondary {
    background-color: #2b2d42;
    color: white;
  }
  
  .btn-secondary:hover {
    background-color: #22253a;
  }
  
  .btn svg {
    margin-right: 8px;
    width: 16px;
    height: 16px;
    flex-shrink: 0;
  }
  
  .section-container {
    background-color: #242647;
    border-radius: 10px;
    padding: 20px 15px;
    margin-bottom: 20px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }
  
  .section-header {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    color: #fff;
    flex-wrap: wrap;
  }
  
  .section-icon {
    margin-right: 12px;
    color: #4361ee;
    flex-shrink: 0;
  }
  
  .section-title {
    font-size: 1.3rem;
    font-weight: 600;
    margin: 0;
  }
  
  .card {
    background-color: #2d3250;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
    transition: transform 0.3s ease;
    word-break: break-word;
  }
  
  .card:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
  }
  
  .card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start; /* Align items at the top */
  flex-wrap: nowrap; /* Prevent wrapping */
  margin-bottom: 12px;
  cursor: pointer;
  gap: 10px;
  }
  
  .card-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #fff;
    margin: 0;
  }
  
  .card-subtitle {
    color: #7579e7;
    margin: 5px 0;
  }
  
  .card-subtitle a {
    color: #7579e7;
    text-decoration: none;
    transition: all 0.3s ease;
  }
  
  .card-subtitle a:hover {
    color: #4361ee;
    text-decoration: underline;
  }
  
  .card-date {
    display: flex;
    align-items: center;
    color: #a0a0a0;
    font-size: 0.85rem;
    flex-wrap: wrap;
  }
  
  .card-date svg {
    margin-right: 5px;
    width: 14px;
    height: 14px;
    flex-shrink: 0;
  }
  
  .card-location {
    display: flex;
    align-items: center;
    color: #a0a0a0;
    font-size: 0.85rem;
    margin-top: 8px;
    flex-wrap: wrap;
  }
  
  .card-location svg {
    margin-right: 5px;
    width: 14px;
    height: 14px;
    flex-shrink: 0;
  }
  
  .tag {
    display: inline-block;
    background-color: #16213e;
    color: #7579e7;
    padding: 4px 10px;
    border-radius: 15px;
    font-size: 0.8rem;
    margin-top: 8px;
    margin-right: 5px;
    margin-bottom: 5px;
  }
  
  .skills-container {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 10px;
  }
  
  .skill-tag {
    display: inline-flex;
    align-items: center;
    background-color: #2d3250;
    color: #fff;
    padding: 5px 12px;
    border-radius: 30px;
    font-size: 0.85rem;
    transition: all 0.3s ease;
    position: relative;
    margin-bottom: 5px;
  }
  
  .skill-tag:hover {
    background-color: #4361ee;
  }
  
  .endorsement-count {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background-color: #16213e;
    color: #7579e7;
    border-radius: 50%;
    font-size: 0.7rem;
    min-width: 18px;
    height: 18px;
    padding: 0 4px;
    margin-left: 6px;
  }
  
  .cert-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 15px;
  }
  
  /* Collapsible sections */
  .collapsible-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
  }
  
  .expanded .collapsible-content {
    max-height: 1000px; /* Increased to accommodate more content */
  }
  
  .toggle-icon {
    transition: transform 0.3s ease;
    margin-left: 5px;
    flex-shrink: 0;
    display: inline-block; /* Make sure it's inline with the date */
  }
  
  .expanded .toggle-icon {
    transform: rotate(180deg);
  }
  
  .section-dropdown {
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    border: none;
    background: transparent;
    color: inherit;
    font-size: inherit;
    font-weight: inherit;
    text-align: left;
    padding: 0;
  }
  
  /* Improved Mobile Responsiveness */
  @media (min-width: 576px) {
    .profile-picture {
      width: 130px;
      height: 130px;
    }
    
    .profile-name {
      font-size: 2rem;
    }
    
    .section-container {
      padding: 20px;
    }
  }
  
  @media (min-width: 768px) {
    .profile-content {
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
    }
    
    .profile-picture {
      width: 140px;
      height: 140px;
      margin-right: 25px;
      margin-bottom: 0;
    }
    
    .button-group {
      justify-content: flex-start;
    }
    
    .profile-header {
      padding: 30px 20px;
    }
    
    .cert-grid {
      grid-template-columns: repeat(2, 1fr);
    }
    
    .section-title {
      font-size: 1.5rem;
    }
    
    .card-title {
      font-size: 1.25rem;
    }
  }
  
  @media (max-width: 767px) {
    .card-header > div:last-child {
      align-self: flex-start; /* Change from flex-end to flex-start */
      margin-top: 0; /* Remove negative margin that was pushing it up */
    }
  }
    
    .card-header > div:last-child {
      display: flex;
      align-items: center; /* Align date and arrow vertically */
      gap: 5px; /* Add space between date and arrow */
    }
  
  
  @media (max-width: 480px) {
    body {
      font-size: 14px;
    }
    
    .profile-name {
      font-size: 1.6rem;
    }
    
    .profile-role {
      font-size: 1rem;
    }
    
    .btn {
      padding: 6px 12px;
      font-size: 0.9rem;
    }
    
    .card {
      padding: 12px;
    }
    
    .section-container {
      padding: 15px 12px;
    }
  }
</style>

<div class="container">
  <!-- Profile Header Section -->
  <div class="profile-header">
    <div class="profile-content">
      <!-- Use a default image if LinkedIn image is blocked -->
      {% set profile_img = profile_data.profile_picture %}
      {% if 'linkedin.com' in profile_img %}
        {% set profile_img = url_for('static', filename='img/default-profile.png') %}
      {% endif %}
      <img src="{{ session.get('profile_picture', url_for('static', filename='profile_picture.jpg')) }}" alt="Profile Picture" class="profile-picture">
      <div class="profile-info">
        <h1 class="profile-name">{{ profile_data.basic_info['First Name'] }} {{ profile_data.basic_info['Last Name'] }}</h1>
        <!-- Show current position/title instead of role -->
        {% if profile_data.experience_details and profile_data.experience_details|length > 0 %}
          <p class="profile-role">{{ profile_data.experience_details[0].Title }} at {{ profile_data.experience_details[0].Organization }}</p>
        {% elif profile_data.education_details and profile_data.education_details|length > 0 %}
          <p class="profile-role">Student at {{ profile_data.education_details[0].InstitutionName }}</p>
        {% endif %}
        <div class="button-group">
          <a href="mailto:{{ profile_data.basic_info['Email'] }}" class="btn btn-primary">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16" height="16">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
            Email
          </a>
          {% if profile_data.basic_info['LinkedIn URL'] %}
            <a href="{{ profile_data.basic_info['LinkedIn URL'] }}" target="_blank" class="btn btn-secondary">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
              </svg>
              LinkedIn
            </a>
          {% endif %}
          {% if not is_public_view %}
            <button class="btn btn-secondary" id="shareProfileBtn" type="button">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                <path d="M13 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h10zm0 1H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z"/>
                <path d="M8 4.5a.5.5 0 0 1 .5.5v3.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 8.793V5a.5.5 0 0 1 .5-.5z"/>
              </svg>
              Share Profile
            </button>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="section-container">
    <div class="section-header">
      <div class="section-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
        </svg>
      </div>
      <h2 class="section-title">Professional Experience</h2>
    </div>
    
    {% for exp in profile_data.experience_details %}
      <div class="card" id="exp-{{ loop.index }}">
        <div class="card-header" onclick="toggleExpand('exp-{{ loop.index }}')">
          <div>
            <h3 class="card-title">{{ exp.Title }}</h3>
            <p class="card-subtitle">
              {% if exp.Organization %}
                {% set org_link = False %}
                {% if profile_data.linkedin_profile_data and profile_data.linkedin_profile_data.experience %}
                  {% for linkedin_exp in profile_data.linkedin_profile_data.experience %}
                    {% if linkedin_exp.organization and linkedin_exp.organization.name == exp.Organization and linkedin_exp.organization.sales_nav_link %}
                      {% set org_link = linkedin_exp.organization.sales_nav_link %}
                    {% endif %}
                  {% endfor %}
                {% endif %}
                {% if org_link %}
                  <a href="{{ org_link }}" target="_blank">{{ exp.Organization }}</a>
                {% else %}
                  {{ exp.Organization }}
                {% endif %}
              {% endif %}
            </p>
          </div>
          <div>
            <div class="card-date">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              {{ exp.StartDate }} - {{ exp.EndDate }}
            </div>
            <svg class="toggle-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </div>
        <div class="collapsible-content">
          {% if exp.Location and exp.Location.strip() %}
            <div class="card-location">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
              {{ exp.Location }}
            </div>
          {% endif %}
          {% if exp.description %}
            <div style="margin-top: 10px; color: #d1d1d1;">
              {{ exp.description | safe }}
            </div>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- Education Section -->
  <div class="section-container">
    <div class="section-header">
      <div class="section-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path d="M12 14l9-5-9-5-9 5 9 5z" />
          <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222" />
        </svg>
      </div>
      <h2 class="section-title">Education</h2>
    </div>
    
    {% for edu in profile_data.education_details %}
      <div class="card" id="edu-{{ loop.index }}">
        <div class="card-header" onclick="toggleExpand('edu-{{ loop.index }}')">
          <div>
            <h3 class="card-title">{{ edu.Degree }}</h3>
            <p class="card-subtitle">
              {% if edu.InstitutionName %}
                {% set inst_link = False %}
                {% if profile_data.linkedin_profile_data and profile_data.linkedin_profile_data.education %}
                  {% for linkedin_edu in profile_data.linkedin_profile_data.education %}
                    {% if linkedin_edu.organization and linkedin_edu.organization.name == edu.InstitutionName and linkedin_edu.organization.link %}
                      {% set inst_link = linkedin_edu.organization.link %}
                    {% endif %}
                  {% endfor %}
                {% endif %}
                {% if inst_link %}
                  <a href="{{ inst_link }}" target="_blank">{{ edu.InstitutionName }}</a>
                {% else %}
                  {{ edu.InstitutionName }}
                {% endif %}
              {% endif %}
            </p>
          </div>
          <div>
            <div class="card-date">
              {% if edu.TimePeriod %}
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                {% if edu.TimePeriod.startedOn %}
                  {{ edu.TimePeriod.startedOn.year }}
                {% endif %}
                {% if edu.TimePeriod.endedOn %}
                  - {{ edu.TimePeriod.endedOn.year }}
                {% endif %}
              {% endif %}
            </div>
            <svg class="toggle-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </div>
        <div class="collapsible-content">
          {% if edu.Field_of_study %}
            <span class="tag">{{ edu.Field_of_study }}</span>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- Certifications Section -->
  {% if profile_data.linkedin_profile_data.certifications %}
    <div class="section-container">
      <div class="section-header">
        <div class="section-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
          </svg>
        </div>
        <button class="section-dropdown" onclick="toggleSection('certifications-section')">
          <h2 class="section-title">Certifications</h2>
          <svg class="toggle-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
      </div>
      <div class="collapsible-content" id="certifications-section">
        <div class="cert-grid">
          {% for cert in profile_data.linkedin_profile_data.certifications %}
            <div class="card">
              <h3 class="card-title">{{ cert.title }}</h3>
              {% if cert.organisation %}
                <p class="card-subtitle">
                  {% if cert.organisation.name %}
                    {% if cert.organisation.salesNavLink %}
                      <a href="{{ cert.organisation.salesNavLink }}" target="_blank">{{ cert.organisation.name }}</a>
                    {% else %}
                      {{ cert.organisation.name }}
                    {% endif %}
                  {% endif %}
                </p>
              {% endif %}
              {% if cert.issuedDate %}
                <div class="card-date">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                  Issued: {{ cert.issuedDate }}
                </div>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  {% endif %}

  <!-- Skills Section -->
  {% if profile_data.linkedin_profile_data.skills %}
    <div class="section-container">
      <div class="section-header">
        <div class="section-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
          </svg>
        </div>
        <button class="section-dropdown" onclick="toggleSection('skills-section')">
          <h2 class="section-title">Skills</h2>
          <svg class="toggle-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
      </div>
      <div class="collapsible-content" id="skills-section">
        <div class="skills-container">
          {% for skill in profile_data.linkedin_profile_data.skills %}
            <div class="skill-tag">
              {{ skill.name }}
              {% if skill.endorsements and skill.endorsements != '0' %}
                <span class="endorsement-count">{{ skill.endorsements }}</span>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  {% endif %}
</div>

<script>
  // Function to toggle expand/collapse for individual cards
  function toggleExpand(id) {
    const element = document.getElementById(id);
    if (element.classList.contains('expanded')) {
      element.classList.remove('expanded');
    } else {
      element.classList.add('expanded');
    }
  }

  // Function to toggle collapsible sections (like Skills and Certifications)
  function toggleSection(id) {
    const section = document.getElementById(id);
    const parent = section.parentElement;
    
    if (section.style.maxHeight) {
      section.style.maxHeight = null;
      parent.classList.remove('expanded');
    } else {
      section.style.maxHeight = section.scrollHeight + "px";
      parent.classList.add('expanded');
    }
  }

  // Initialize all section toggles to be collapsed on page load
  document.addEventListener('DOMContentLoaded', function() {
    // Auto-expand first experience to show users that content is expandable
    const firstExp = document.getElementById('exp-1');
    if (firstExp) {
      firstExp.classList.add('expanded');
    }
    
    // Initialize skills section to be expanded by default
    const skillsSection = document.getElementById('skills-section');
    if (skillsSection) {
      skillsSection.parentElement.classList.add('expanded');
      skillsSection.style.maxHeight = skillsSection.scrollHeight + "px";
    }
    
    // Fix for touch devices
    document.querySelectorAll('.card-header').forEach(header => {
      header.addEventListener('touchend', function(e) {
        const id = this.parentElement.id;
        toggleExpand(id);
      });
    });

    const shareBtn = document.getElementById('shareProfileBtn');
    if (shareBtn) {
      shareBtn.onclick = function() {
        const url = window.location.origin + '/invite/{{ profile_data.public_id }}';
        navigator.clipboard.writeText(url).then(function() {
          alert('Profile link copied! You can now share it.');
        }, function() {
          alert('Failed to copy link. Please copy it manually.');
        });
      }
    }
  });
</script>
{% endblock %}